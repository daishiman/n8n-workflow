{
  "name": "ã€æ”¹å–„ç‰ˆã€‘Google Meetè­°äº‹éŒ²è‡ªå‹•åŒ–",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyX",
              "value": 5,
              "unit": "minutes"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1znZ8JC-Zej5BHPPUGb7-1V_Lt9omuQ_g",
          "mode": "list",
          "cachedResultName": "Meet Recordings"
        },
        "event": "fileCreated",
        "options": {
          "fileType": "application/vnd.google-apps.document"
        }
      },
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [0, 0],
      "id": "trigger-google-drive",
      "name": "ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "oTRCN0nC6MxrSHAe",
          "name": "Google Drive account"
        }
      },
      "notes": "5åˆ†ã”ã¨ã«æ–°è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–ï¼‰"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {
          "googleFileConversion": {
            "conversion": {
              "docsToFormat": "text/plain"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [200, 0],
      "id": "download-file",
      "name": "ğŸ“¥ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "oTRCN0nC6MxrSHAe",
          "name": "Google Drive account"
        }
      },
      "onError": "continueErrorOutput",
      "retryOnFail": true,
      "maxTries": 3,
      "waitBetweenTries": 5000,
      "notes": "ã‚¨ãƒ©ãƒ¼æ™‚ã¯3å›ãƒªãƒˆãƒ©ã‚¤ã€5ç§’é–“éš”"
    },
    {
      "parameters": {
        "jsCode": "// ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¨ã‚µã‚¤ã‚ºã®æ¤œè¨¼\nconst items = $input.all();\nconst validated = [];\nconst errors = [];\n\nfor (const item of items) {\n  const validation = {\n    isValid: true,\n    errors: [],\n    warnings: []\n  };\n\n  // MIMEã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯\n  const mimeType = item.json.mimeType;\n  if (mimeType !== 'text/plain' && mimeType !== 'application/vnd.google-apps.document') {\n    validation.isValid = false;\n    validation.errors.push(`ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: ${mimeType}`);\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«åãƒã‚§ãƒƒã‚¯\n  const name = item.json.name || '';\n  if (name.length === 0) {\n    validation.errors.push('ãƒ•ã‚¡ã‚¤ãƒ«åãŒç©ºã§ã™');\n  }\n\n  // ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯\n  if (!item.binary || !item.binary.data) {\n    validation.isValid = false;\n    validation.errors.push('ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ');\n  }\n\n  if (validation.isValid) {\n    validated.push({\n      json: {\n        ...item.json,\n        validation: validation\n      },\n      binary: item.binary\n    });\n  } else {\n    errors.push({\n      json: {\n        ...item.json,\n        validation: validation,\n        error: validation.errors.join(', ')\n      }\n    });\n  }\n}\n\nif (validated.length === 0 && errors.length > 0) {\n  throw new Error(`ãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼å¤±æ•—: ${errors[0].json.error}`);\n}\n\nreturn validated;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [400, 0],
      "id": "validate-file",
      "name": "ğŸ” ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼æ¤œè¨¼",
      "onError": "continueErrorOutput",
      "retryOnFail": false,
      "notes": "ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¨ãƒ‡ãƒ¼ã‚¿ã®å¦¥å½“æ€§ã‚’æ¤œè¨¼"
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [600, 0],
      "id": "extract-text",
      "name": "ğŸ“„ ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º",
      "onError": "continueErrorOutput",
      "retryOnFail": true,
      "maxTries": 2,
      "notes": "ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º"
    },
    {
      "parameters": {
        "jsCode": "// æŠ½å‡ºãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼\nconst items = $input.all();\nconst validated = [];\n\nfor (const item of items) {\n  const data = item.json.data || '';\n  const validation = {\n    isValid: true,\n    dataLength: data.length,\n    warnings: []\n  };\n\n  // æœ€å°æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯ï¼ˆè­°äº‹éŒ²ã¨ã—ã¦å¦¥å½“ã‹ï¼‰\n  if (data.length < 100) {\n    validation.isValid = false;\n    validation.warnings.push(`ãƒ‡ãƒ¼ã‚¿ãŒçŸ­ã™ãã¾ã™ï¼ˆ${data.length}æ–‡å­—ï¼‰`);\n  }\n\n  // æœ€å¤§æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯ï¼ˆç•°å¸¸ã«é•·ã„ãƒ‡ãƒ¼ã‚¿ï¼‰\n  if (data.length > 100000) {\n    validation.warnings.push('ãƒ‡ãƒ¼ã‚¿ãŒéå¸¸ã«é•·ã„ã§ã™ã€‚å‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');\n  }\n\n  // æ—¥æœ¬èªãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯\n  const hasJapanese = /[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\uff00-\\uff9f\\u4e00-\\u9faf\\u3400-\\u4dbf]/.test(data);\n  if (!hasJapanese) {\n    validation.warnings.push('æ—¥æœ¬èªãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ');\n  }\n\n  if (validation.isValid) {\n    validated.push({\n      json: {\n        ...item.json,\n        validation: validation\n      }\n    });\n  } else {\n    throw new Error(`ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼å¤±æ•—: ${validation.warnings.join(', ')}`);\n  }\n}\n\nreturn validated;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [800, 0],
      "id": "validate-data",
      "name": "âœ… ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼",
      "onError": "continueErrorOutput",
      "notes": "æŠ½å‡ºãƒ‡ãƒ¼ã‚¿ãŒè­°äº‹éŒ²ã¨ã—ã¦å¦¥å½“ã‹ãƒã‚§ãƒƒã‚¯"
    },
    {
      "parameters": {
        "resource": "block",
        "operation": "getAll",
        "blockId": {
          "__rl": true,
          "value": "https://www.notion.so/28184a6eb3778018be02c10438d06b99",
          "mode": "url"
        },
        "returnAll": true
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [1000, -200],
      "id": "fetch-customer-list",
      "name": "ğŸ“‹ é¡§å®¢ãƒªã‚¹ãƒˆå…¨ä»¶å–å¾—",
      "credentials": {
        "notionApi": {
          "id": "FnFzahqSM9wdlbaA",
          "name": "Notion account"
        }
      },
      "onError": "continueErrorOutput",
      "retryOnFail": true,
      "maxTries": 3,
      "waitBetweenTries": 3000,
      "notes": "å…¨é¡§å®¢ãƒªã‚¹ãƒˆã‚’å–å¾—ï¼ˆlimitå‰Šé™¤ï¼‰"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('ğŸ“„ ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º').item.json.data }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=ã“ã‚Œã¯å¼Šç¤¾ã®é¡§å®¢ãƒªã‚¹ãƒˆå…¨ä»¶ã§ã™ï¼š\n{{ $('ğŸ“‹ é¡§å®¢ãƒªã‚¹ãƒˆå…¨ä»¶å–å¾—').item.json.content }}\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›å€¤ï¼ˆè­°äº‹éŒ²ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã‚’åˆ†æã—ã€é¡§å®¢ãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹é¡§å®¢ã¨ã®ä¼šè­°ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚"
            }
          ]
        },
        "options": {
          "systemMessage": "ã‚ãªãŸã¯é¡§å®¢æƒ…å ±ã‚’ç…§åˆã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚è­°äº‹éŒ²ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰é¡§å®¢åã‚„ä¼æ¥­åã‚’æŠ½å‡ºã—ã€æä¾›ã•ã‚ŒãŸé¡§å®¢ãƒªã‚¹ãƒˆã¨ç…§åˆã—ã¦ãã ã•ã„ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [1200, 0],
      "id": "match-customer",
      "name": "ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ",
      "onError": "continueErrorOutput",
      "retryOnFail": true,
      "maxTries": 3,
      "waitBetweenTries": 5000,
      "notes": "è­°äº‹éŒ²ã‹ã‚‰é¡§å®¢ã‚’ç‰¹å®šã—ã€é¡§å®¢ãƒªã‚¹ãƒˆã¨ç…§åˆ"
    },
    {
      "parameters": {
        "modelName": "x-ai/grok-2-1212",
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [1200, 200],
      "id": "llm-grok",
      "name": "ğŸ¤– Grok-2ãƒ¢ãƒ‡ãƒ«",
      "credentials": {
        "openRouterApi": {
          "id": "4LOg2qTyGJmHv48d",
          "name": "masao private key"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"is_existing_customer\": true,\n  \"customer_name\": \"æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«\",\n  \"customer_data\": \"é¡§å®¢ã®èª¬æ˜ã‚„éå»ã®å–å¼•å±¥æ­´\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [1200, 400],
      "id": "parser-customer",
      "name": "ğŸ“ é¡§å®¢æƒ…å ±ãƒ‘ãƒ¼ã‚µãƒ¼"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('ğŸ“„ ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º').item.json.data }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=ã‚ãªãŸã¯ã€ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è­°äº‹éŒ²ã‚’ä½œæˆã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚ä»¥ä¸‹ã®JSONå½¢å¼ã«æ²¿ã£ã¦è­°äº‹éŒ²ã®ä½œæˆã‚’è¡Œã£ã¦ãã ã•ã„ã€‚ã‚ã‹ã‚Šã‚„ã™ãèª­ã¿ã‚„ã™ã„è­°äº‹éŒ²ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚\n\n{\n    \"date\": \"ãƒ¡ãƒ¢å†…éƒ¨ã«æ—¥ä»˜ãŒã‚ã‚Œã°ã€2025å¹´1æœˆ1æ—¥ **æ™‚**åˆ†ã®å½¢ã§\",\n    \"title\": \"ã“ã®docsã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’è€ƒãˆã¦è¨­å®š\",\n    \"abstract_text\": \"140æ–‡å­—ä»¥å†…\",\n    \"todo\": [\"æ¬¡ã«ã‚„ã‚‹ã¹ãã“ã¨ãªã©\"],\n    \"tldv\": [\"ãƒã‚¤ãƒ³ãƒˆ\"],\n    \"meetings_flow\": [\"ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…éƒ¨ã®è©±ã®æµã‚Œã‚’ã‚ã‹ã‚Šã‚„ã™ãã€æŠœã‘æ¼ã‚Œãªãã¾ã¨ã‚ã‚‹\"],\n    \"meeting_score\": \"0-100ç‚¹ã§mtgã®ã‚¹ã‚³ã‚¢ã‚’ã€‚æœ€é«˜ã®mtgã¯80ä»¥ä¸Šãƒ»è‰¯ã„MTGã¯60ä»¥ä¸Šã€èµ¤ç‚¹ã¯60æœªæº€\",\n    \"meeting_reflection\":\"mtgã®åçœãƒã‚¤ãƒ³ãƒˆ\"\n}\n\nã€é¡§å®¢æƒ…å ±ã€‘\n{{ $('ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ').item.json.output }}\n\nä¸Šè¨˜ã®é¡§å®¢æƒ…å ±ã‚’è¸ã¾ãˆã¦ã€è­°äº‹éŒ²ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [1400, 0],
      "id": "generate-minutes",
      "name": "ğŸ¤– çµ±åˆè­°äº‹éŒ²ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ",
      "retryOnFail": true,
      "maxTries": 5,
      "waitBetweenTries": 5000,
      "notes": "é¡§å®¢æƒ…å ±ã‚’å«ã‚ãŸè­°äº‹éŒ²ã‚’ä¸€æ‹¬ç”Ÿæˆ"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {
          "temperature": 0.5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [1400, 200],
      "id": "llm-gemini",
      "name": "ğŸ¤– Gemini 2.0ãƒ¢ãƒ‡ãƒ«",
      "credentials": {
        "googlePalmApi": {
          "id": "oDxMxVwQCQUCqP5O",
          "name": "m personal API Key"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n    \"date\": \"2025å¹´10æœˆ1æ—¥ 18:57\",\n    \"title\": \"mtg title\",\n    \"abstract_text\": \"140æ–‡å­—\",\n    \"todo\": [\"\"],\n    \"tldv\": [\"\"],\n    \"meetings_flow\": [\"\", \"\", \"\"],\n    \"meeting_score\": 100,\n    \"meeting_reflection\":\"mtgã®åçœãƒã‚¤ãƒ³ãƒˆ\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [1400, 400],
      "id": "parser-minutes",
      "name": "ğŸ“ è­°äº‹éŒ²ãƒ‘ãƒ¼ã‚µãƒ¼"
    },
    {
      "parameters": {
        "jsCode": "// æ”¹å–„ç‰ˆ: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°è¿½åŠ \nfunction parseJpDatetime(str) {\n  try {\n    if (typeof str !== 'string') return null;\n    const m = str.match(/(\\d{4})å¹´\\s*(\\d{1,2})æœˆ\\s*(\\d{1,2})æ—¥(?:\\s+(\\d{1,2})æ™‚(\\d{1,2})åˆ†)?/);\n    if (!m) return null;\n    const [, y, mon, d, hh = '0', mm = '0'] = m;\n    const dt = new Date(Number(y), Number(mon) - 1, Number(d), Number(hh), Number(mm));\n    const pad = (n, len = 2) => String(n).padStart(len, '0');\n    const compact = `${y}${pad(mon)}${pad(d)}`;\n    return {\n      isoString: dt.toISOString(),\n      compact,\n      original: str\n    };\n  } catch (error) {\n    console.error('æ—¥ä»˜ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:', error);\n    return null;\n  }\n}\n\nfunction bullets(arr, { numbered = false } = {}) {\n  if (!Array.isArray(arr) || arr.length === 0) return '';\n  return arr.map((t, i) =>\n    `${numbered ? `${i + 1}.` : '-'} ${t}`\n  ).join('\\n');\n}\n\nconst toProcess = [];\nfor (const item of items) {\n  if (Array.isArray(item.json)) {\n    for (const row of item.json) toProcess.push(row);\n  } else {\n    toProcess.push(item.json);\n  }\n}\n\nconst out = [];\n\nfor (const row of toProcess) {\n  try {\n    const data = row?.output ?? row;\n    const dateInfo = parseJpDatetime(data?.date ?? '');\n\n    const title = data?.title ?? 'ç„¡é¡Œ';\n    const abstractText = data?.abstract_text ?? '';\n    const tldv = Array.isArray(data?.tldv) ? data.tldv : [];\n    const todo = Array.isArray(data?.todo) ? data.todo : [];\n    const flow = Array.isArray(data?.meetings_flow) ? data.meetings_flow : [];\n    const meetingScore = data?.meeting_score ?? 0;\n    const reflection = data?.meeting_reflection ?? '';\n\n    // contentæ§‹ç¯‰\n    const txt = [\n      'ã€TODOã€‘',\n      bullets(todo, { numbered: true }),\n      '',\n      'ã€TL;DVï¼ˆé‡è¦ãƒã‚¤ãƒ³ãƒˆï¼‰ã€‘',\n      bullets(tldv),\n      '',\n      'ã€è­°äº‹éŒ²ï¼ˆæµã‚Œï¼‰ã€‘',\n      bullets(flow),\n      '',\n      'ã€ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°åçœã€‘',\n      reflection\n    ].join('\\n');\n\n    out.push({\n      json: {\n        title,\n        excerpt: abstractText?.slice(0, 140) || 'è¦ç´„ãªã—',\n        content: txt,\n        date_iso: dateInfo?.compact ?? 'YYYYMMDD',\n        date_iso_full: dateInfo?.isoString ?? new Date().toISOString(),\n        meeting_score: meetingScore,\n        meeting_reflection: reflection,\n        processed_at: new Date().toISOString()\n      }\n    });\n  } catch (error) {\n    console.error('ãƒ‡ãƒ¼ã‚¿æ•´å½¢ã‚¨ãƒ©ãƒ¼:', error);\n    // ã‚¨ãƒ©ãƒ¼ã§ã‚‚æœ€ä½é™ã®ãƒ‡ãƒ¼ã‚¿ã¯è¿”ã™\n    out.push({\n      json: {\n        title: 'ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ',\n        excerpt: 'ãƒ‡ãƒ¼ã‚¿æ•´å½¢ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',\n        content: `ã‚¨ãƒ©ãƒ¼è©³ç´°: ${error.message}`,\n        date_iso: new Date().toISOString().slice(0, 10).replace(/-/g, ''),\n        date_iso_full: new Date().toISOString(),\n        meeting_score: 0,\n        error: error.message\n      }\n    });\n  }\n}\n\nreturn out;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1600, 0],
      "id": "format-data",
      "name": "ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢",
      "onError": "continueErrorOutput",
      "notes": "è­°äº‹éŒ²ãƒ‡ãƒ¼ã‚¿ã‚’Notion/Slackç”¨ã«æ•´å½¢"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "27f84a6e-b377-8059-a691-f5d048ae5a08",
          "mode": "list",
          "cachedResultName": "å±¥æ­´"
        },
        "title": "={{ $json.date_iso }}_{{ $json.title }}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Date|date",
              "date": "={{ $json.date_iso_full }}"
            },
            {
              "key": "æ›´æ–°è€…|people",
              "peopleValue": ["76f63ebc-85c9-4c0d-85c4-b4597c951721"]
            },
            {
              "key": "ãƒªãƒ³ã‚¯|files",
              "fileUrls": {
                "fileUrl": [
                  {
                    "name": "GoogleDrive",
                    "url": "={{ $('ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰').item.json.webViewLink }}"
                  }
                ]
              }
            },
            {
              "key": "ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ç›¸æ‰‹|rich_text",
              "textContent": "={{ $('ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ').item.json.output.customer_name }}"
            },
            {
              "key": "ã‚¹ã‚³ã‚¢|number",
              "numberValue": "={{ $json.meeting_score }}"
            }
          ]
        },
        "blockUi": {
          "blockValues": [
            {
              "type": "heading_1",
              "textContent": "ğŸ“‹ è¦ç´„"
            },
            {
              "textContent": "={{ $json.excerpt }}"
            },
            {
              "textContent": "=â° æ—¥æ™‚: {{ $json.date_iso_full }}"
            },
            {
              "richText": true,
              "text": {
                "text": [
                  {
                    "text": "ğŸ”—ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ã‹ã‚‰",
                    "isLink": true,
                    "textLink": "={{ $('ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰').item.json.webViewLink }}",
                    "annotationUi": {}
                  },
                  {
                    "text": "=\n\nâœ… ã‚¹ã‚³ã‚¢: {{ $json.meeting_score }} / 100",
                    "annotationUi": {}
                  },
                  {
                    "text": "=\n\nğŸ’¡ MTGã®åçœç‚¹: {{ $json.meeting_reflection }}",
                    "annotationUi": {
                      "code": true
                    }
                  },
                  {
                    "text": "=\n\n{{ $json.content }}",
                    "annotationUi": {}
                  }
                ]
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [1800, 0],
      "id": "create-notion-page",
      "name": "ğŸ’¾ Notionä½œæˆ",
      "credentials": {
        "notionApi": {
          "id": "FnFzahqSM9wdlbaA",
          "name": "Notion account"
        }
      },
      "onError": "continueErrorOutput",
      "retryOnFail": true,
      "maxTries": 3,
      "waitBetweenTries": 5000,
      "notes": "è­°äº‹éŒ²ã‚’Notionãƒšãƒ¼ã‚¸ã¨ã—ã¦ä½œæˆ"
    },
    {
      "parameters": {
        "webhookUri": "={{ $credentials.webhookUri }}",
        "content": "=ğŸ‰ **MTGã®è­°äº‹éŒ²ã‚’è¿½åŠ ã—ã¾ã—ãŸ**",
        "embeds": {
          "values": [
            {
              "title": "={{ $('ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢').item.json.date_iso }} {{ $('ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢').item.json.title }}",
              "description": "={{ $('ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢').item.json.excerpt }}",
              "color": "=5763719",
              "fields": {
                "fields": [
                  {
                    "name": "ğŸ“Š MTGã‚¹ã‚³ã‚¢",
                    "value": "={{ $('ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢').item.json.meeting_score }}/100ç‚¹",
                    "inline": true
                  },
                  {
                    "name": "ğŸ‘¥ ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç›¸æ‰‹",
                    "value": "={{ $('ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ').item.json.output.customer_name || 'ä¸æ˜' }}",
                    "inline": true
                  },
                  {
                    "name": "ğŸ“ Notionãƒšãƒ¼ã‚¸",
                    "value": "=[ãƒªãƒ³ã‚¯ã‚’é–‹ã]({{ $('ğŸ’¾ Notionä½œæˆ').item.json.url }})"
                  },
                  {
                    "name": "ğŸ“ Google Drive",
                    "value": "=[å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã]({{ $('ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰').item.json.webViewLink }})"
                  }
                ]
              },
              "footer": {
                "text": "n8n è­°äº‹éŒ²è‡ªå‹•åŒ–",
                "iconUrl": "https://n8n.io/favicon.ico"
              },
              "timestamp": "={{ new Date().toISOString() }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [2000, 0],
      "id": "send-discord",
      "name": "ğŸ“¢ Discordé€šçŸ¥",
      "credentials": {
        "discordWebhookApi": {
          "id": "your-discord-webhook-id",
          "name": "Discord Webhook"
        }
      },
      "onError": "continueErrorOutput",
      "retryOnFail": true,
      "maxTries": 2,
      "notes": "æˆåŠŸé€šçŸ¥ã‚’Discordã«é€ä¿¡"
    },
    {
      "parameters": {
        "jsCode": "// å®Ÿè¡Œãƒ­ã‚°ã®è¨˜éŒ²\nconst items = $input.all();\nconst logs = [];\n\nfor (const item of items) {\n  logs.push({\n    json: {\n      workflow_id: $workflow.id,\n      workflow_name: $workflow.name,\n      execution_id: $execution.id,\n      execution_mode: $execution.mode,\n      timestamp: new Date().toISOString(),\n      status: 'success',\n      file_name: $('ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰').item.json.name,\n      file_id: $('ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰').item.json.id,\n      customer_name: $('ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ').item.json.output?.customer_name || 'Unknown',\n      meeting_score: item.json.meeting_score,\n      notion_url: $('ğŸ’¾ Notionä½œæˆ').item.json.url,\n      discord_notified: true,\n      processed_data: {\n        title: item.json.title,\n        date: item.json.date_iso_full,\n        excerpt_length: item.json.excerpt?.length || 0\n      }\n    }\n  });\n}\n\nconsole.log('å®Ÿè¡Œãƒ­ã‚°è¨˜éŒ²:', logs);\nreturn logs;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2200, 0],
      "id": "log-execution",
      "name": "ğŸ’¾ å®Ÿè¡Œãƒ­ã‚°è¨˜éŒ²",
      "notes": "ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå±¥æ­´ã‚’è¨˜éŒ²ï¼ˆå°†æ¥çš„ã«DBã‚„Notionä¿å­˜å¯èƒ½ï¼‰"
    }
  ],
  "connections": {
    "ğŸ“ Google Driveç›£è¦–ï¼ˆ5åˆ†é–“éš”ï¼‰": {
      "main": [[{"node": "ğŸ“¥ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰", "type": "main", "index": 0}]]
    },
    "ğŸ“¥ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰": {
      "main": [[{"node": "ğŸ” ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼æ¤œè¨¼", "type": "main", "index": 0}]]
    },
    "ğŸ” ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼æ¤œè¨¼": {
      "main": [[{"node": "ğŸ“„ ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º", "type": "main", "index": 0}]]
    },
    "ğŸ“„ ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º": {
      "main": [[{"node": "âœ… ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼", "type": "main", "index": 0}]]
    },
    "âœ… ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼": {
      "main": [[{"node": "ğŸ“‹ é¡§å®¢ãƒªã‚¹ãƒˆå…¨ä»¶å–å¾—", "type": "main", "index": 0}]]
    },
    "ğŸ“‹ é¡§å®¢ãƒªã‚¹ãƒˆå…¨ä»¶å–å¾—": {
      "main": [[{"node": "ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ", "type": "main", "index": 0}]]
    },
    "ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ": {
      "main": [[{"node": "ğŸ¤– çµ±åˆè­°äº‹éŒ²ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", "type": "main", "index": 0}]]
    },
    "ğŸ¤– Grok-2ãƒ¢ãƒ‡ãƒ«": {
      "ai_languageModel": [[
        {"node": "ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ", "type": "ai_languageModel", "index": 0}
      ]]
    },
    "ğŸ“ é¡§å®¢æƒ…å ±ãƒ‘ãƒ¼ã‚µãƒ¼": {
      "ai_outputParser": [[
        {"node": "ğŸ”— é¡§å®¢æƒ…å ±ç…§åˆ", "type": "ai_outputParser", "index": 0}
      ]]
    },
    "ğŸ¤– çµ±åˆè­°äº‹éŒ²ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ": {
      "main": [[{"node": "ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢", "type": "main", "index": 0}]]
    },
    "ğŸ¤– Gemini 2.0ãƒ¢ãƒ‡ãƒ«": {
      "ai_languageModel": [[
        {"node": "ğŸ¤– çµ±åˆè­°äº‹éŒ²ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", "type": "ai_languageModel", "index": 0}
      ]]
    },
    "ğŸ“ è­°äº‹éŒ²ãƒ‘ãƒ¼ã‚µãƒ¼": {
      "ai_outputParser": [[
        {"node": "ğŸ¤– çµ±åˆè­°äº‹éŒ²ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", "type": "ai_outputParser", "index": 0}
      ]]
    },
    "ğŸ“¦ ãƒ‡ãƒ¼ã‚¿æ•´å½¢": {
      "main": [[{"node": "ğŸ’¾ Notionä½œæˆ", "type": "main", "index": 0}]]
    },
    "ğŸ’¾ Notionä½œæˆ": {
      "main": [[{"node": "ğŸ“¢ Discordé€šçŸ¥", "type": "main", "index": 0}]]
    },
    "ğŸ“¢ Discordé€šçŸ¥": {
      "main": [[{"node": "ğŸ’¾ å®Ÿè¡Œãƒ­ã‚°è¨˜éŒ²", "type": "main", "index": 0}]]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "saveExecutionProgress": true,
    "timezone": "Asia/Tokyo",
    "errorWorkflow": "error-workflow-id"
  },
  "staticData": null,
  "tags": ["è­°äº‹éŒ²", "è‡ªå‹•åŒ–", "AI", "æ”¹å–„ç‰ˆ"],
  "pinData": {},
  "versionId": "improved-v2.0"
}