{
  "name": "Discord_to_GoogleCalendar_Sync_AllInOne",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "discord-event",
        "responseMode": "onReceived",
        "responseData": "{\"status\": \"received\"}"
      },
      "id": "T001",
      "name": "Discordãƒˆãƒªã‚¬ãƒ¼",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// Discordãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è§£æ\\ntry {\\n  const message = $json.body.content;\\n  const pattern = /äºˆå®š[:ï¼š](.*)æ—¥æ™‚[:ï¼š](.*)/;\\n  const match = message.match(pattern);\\n  if (!match) throw new Error('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ãŒä¸æ­£ã§ã™');\\n  return [{ json: { title: match[1].trim(), date: match[2].trim() } }];\\n} catch (error) {\\n  return [{ json: { error: error.message } }];\\n}"
      },
      "id": "T002",
      "name": "Discordå…¥åŠ›è§£æï¼ˆAIï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [500, 300]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// å½¢å¼æ¤œè¨¼\\nif ($json.error) return $json;\\nif (!$json.title || !$json.date) throw new Error('ã‚¿ã‚¤ãƒˆãƒ«ã¾ãŸã¯æ—¥ä»˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™');\\nreturn $input.item;"
      },
      "id": "T003",
      "name": "äºˆå®šãƒ‡ãƒ¼ã‚¿å½¢å¼æ¤œè¨¼ï¼ˆAIï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 300]
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": { "__rl": true },
        "options": { "timeMin": "={{$json.date}}", "timeMax": "={{$json.date}}" }
      },
      "id": "T004",
      "name": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å–å¾—",
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1,
      "position": [900, 300],
      "credentials": { "googleApi": { "name": "Google OAuth2" } },
      "continueOnFail": true
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "if ($json.error) return $json;\\nconst events = $input.all();\\nreturn [{ json: { hasConflict: events.length > 0, conflicts: events.map(e => e.json.summary || '') } }];"
      },
      "id": "T005",
      "name": "é‡è¤‡æ¤œå‡ºï¼ˆAIï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1100, 300],
      "continueOnFail": true
    },
    {
      "parameters": {
        "conditions": { "boolean": [{ "value1": "={{$json.hasConflict}}", "value2": false }] }
      },
      "id": "T006",
      "name": "é‡è¤‡ã‚ã‚Šï¼ãªã—åˆ†å²",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1300, 300]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "if ($json.error) return $json;\\nreturn [{ json: { summary: $json.title, start: { dateTime: $json.date }, end: { dateTime: $json.date }, attendees: [] } }];"
      },
      "id": "T007",
      "name": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆAIï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1500, 200]
    },
    {
      "parameters": {
        "operation": "create",
        "calendar": { "__rl": true }
      },
      "id": "T008",
      "name": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²",
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1,
      "position": [1700, 200],
      "credentials": { "googleApi": { "name": "Google OAuth2" } },
      "continueOnFail": true
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "return [{ json: { recipients: ['team@example.com','pm@example.com'] } }];"
      },
      "id": "T009",
      "name": "é–¢ä¿‚è€…æŠ½å‡ºï¼ˆAIï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1900, 200]
    },
    {
      "parameters": {
        "operation": "send",
        "toEmail": "={{$json.recipients.join(', ')}}",
        "subject": "æ–°ã—ã„äºˆå®šãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ",
        "message": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆãŒç™»éŒ²ã•ã‚Œã¾ã—ãŸã€‚"
      },
      "id": "T010",
      "name": "Gmailé€šçŸ¥é€ä¿¡",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 1,
      "position": [2100, 200],
      "credentials": { "gmailOAuth2": { "name": "Gmail OAuth2" } },
      "continueOnFail": true
    },
    {
      "parameters": {
        "webhookUri": "={{$env('DISCORD_WEBHOOK')}}",
        "content": "âœ… äºˆå®šã‚’Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ç™»éŒ²ã—ã¾ã—ãŸï¼"
      },
      "id": "T011",
      "name": "Discordé€šçŸ¥ï¼ˆæˆåŠŸï¼‰",
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [2300, 200]
    },
    {
      "parameters": {
        "webhookUri": "={{$env('DISCORD_WEBHOOK')}}",
        "content": "âš ï¸ äºˆå®šãŒé‡è¤‡ã—ã¦ã„ã‚‹ãŸã‚ç™»éŒ²ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã—ãŸã€‚"
      },
      "id": "T012",
      "name": "Discordé€šçŸ¥ï¼ˆé‡è¤‡ï¼‰",
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [1500, 400]
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±åˆ\\nif ($json.error || $json.hasConflict === undefined && !$json.title) {\\n  const msg = $json.error || 'æœªçŸ¥ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';\\n  return [{ json: { error_message: msg, node: $node.name, time: new Date().toISOString() } }];\\n}\\nreturn [];"
      },
      "id": "T013",
      "name": "å†…éƒ¨ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 500]
    },
    {
      "parameters": {
        "webhookUri": "={{$env('DISCORD_ERROR_WEBHOOK')}}",
        "content": "ğŸš¨ **ã‚¨ãƒ©ãƒ¼é€šçŸ¥** ğŸš¨\\nãƒãƒ¼ãƒ‰: {{$json.node}}\\nå†…å®¹: {{$json.error_message}}\\næ™‚åˆ»: {{$json.time}}"
      },
      "id": "T014",
      "name": "Discordé€šçŸ¥ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰",
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [1150, 500]
    }
  ],
  "connections": {
    "Discordãƒˆãƒªã‚¬ãƒ¼": { "main": [[{ "node": "Discordå…¥åŠ›è§£æï¼ˆAIï¼‰", "type": "main", "index": 0 }]] },
    "Discordå…¥åŠ›è§£æï¼ˆAIï¼‰": { "main": [[{ "node": "äºˆå®šãƒ‡ãƒ¼ã‚¿å½¢å¼æ¤œè¨¼ï¼ˆAIï¼‰", "type": "main", "index": 0 }]] },
    "äºˆå®šãƒ‡ãƒ¼ã‚¿å½¢å¼æ¤œè¨¼ï¼ˆAIï¼‰": { "main": [[{ "node": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å–å¾—", "type": "main", "index": 0 }]] },
    "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å–å¾—": {
      "main": [
        [{ "node": "é‡è¤‡æ¤œå‡ºï¼ˆAIï¼‰", "type": "main", "index": 0 }],
        [{ "node": "å†…éƒ¨ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯", "type": "main", "index": 0 }]
      ]
    },
    "é‡è¤‡æ¤œå‡ºï¼ˆAIï¼‰": {
      "main": [[{ "node": "é‡è¤‡ã‚ã‚Šï¼ãªã—åˆ†å²", "type": "main", "index": 0 }]]
    },
    "é‡è¤‡ã‚ã‚Šï¼ãªã—åˆ†å²": {
      "main": [
        [{ "node": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆAIï¼‰", "type": "main", "index": 0 }],
        [{ "node": "Discordé€šçŸ¥ï¼ˆé‡è¤‡ï¼‰", "type": "main", "index": 0 }]
      ]
    },
    "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆAIï¼‰": { "main": [[{ "node": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²", "type": "main", "index": 0 }]] },
    "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²": { "main": [[{ "node": "é–¢ä¿‚è€…æŠ½å‡ºï¼ˆAIï¼‰", "type": "main", "index": 0 }]] },
    "é–¢ä¿‚è€…æŠ½å‡ºï¼ˆAIï¼‰": { "main": [[{ "node": "Gmailé€šçŸ¥é€ä¿¡", "type": "main", "index": 0 }]] },
    "Gmailé€šçŸ¥é€ä¿¡": { "main": [[{ "node": "Discordé€šçŸ¥ï¼ˆæˆåŠŸï¼‰", "type": "main", "index": 0 }]] },
    "å†…éƒ¨ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯": { "main": [[{ "node": "Discordé€šçŸ¥ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰", "type": "main", "index": 0 }]] }
  },
  "settings": {
    "executionOrder": "v1",
    "timezone": "Asia/Tokyo",
    "saveExecutionProgress": true
  },
  "versionId": "v1.1"
}
