{
  "name": "Group 3: æ–‡å­—èµ·ã“ã—æ•´å½¢ï¼ˆä¸¦åˆ—ï¼‰",
  "nodes": [
    {
      "id": "ai_agent_step2_g3",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "name": "AI Agent Step2 - æ–‡å­—èµ·ã“ã—æ•´å½¢",
      "typeVersion": 3,
      "position": [2200, 300],
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chunk }}",
        "hasOutputParser": false,
        "options": {
          "systemMessage": "ã‚ãªãŸã¯è­°äº‹éŒ²ä½œæˆã®å°‚é–€å®¶ã§ã™ã€‚éŸ³å£°æ–‡å­—èµ·ã“ã—ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«æ•´å½¢ã—ã¾ã™ã€‚\n\nã€æ•´å½¢ãƒ«ãƒ¼ãƒ«ã€‘\n1. ãƒ•ã‚£ãƒ©ãƒ¼ï¼ˆã€Œãˆãƒ¼ã€ã€Œã‚ã®ãƒ¼ã€ã€Œã†ãƒ¼ã‚“ã€ãªã©ï¼‰ã‚’å‰Šé™¤\n2. é‡è¤‡è¡¨ç¾ã‚’çµ±ä¸€ï¼ˆã€Œãã‚Œã§ãã‚Œã§ã€â†’ã€Œãã‚Œã§ã€ï¼‰\n3. è©±ã—è¨€è‘‰ã‚’é©åˆ‡ã«æ•´ç†ï¼ˆæ„å‘³ã‚’æãªã‚ãªã„ç¯„å›²ã§ï¼‰\n4. ç®‡æ¡æ›¸ãå½¢å¼ã«å¤‰æ›ï¼ˆå„ç™ºè¨€ã‚’ç‹¬ç«‹ã—ãŸé …ç›®ã«ï¼‰\n5. è©±è€…æƒ…å ±ã‚’ä¿æŒï¼ˆSpeaker 1ã€Speaker 2ãªã©ï¼‰\n6. ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æƒ…å ±ã‚’ä¿æŒ\n\nã€å‡ºåŠ›å½¢å¼ã€‘\n- å„è¡Œ: [è©±è€…] ç™ºè¨€å†…å®¹\n- ä¾‹: [Speaker 1] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—ã«ã¤ã„ã¦å ±å‘Šã—ã¾ã™ã€‚\n\nã€ç¦æ­¢äº‹é …ã€‘\n- å†…å®¹ã®è¦ç´„ã‚„çœç•¥ï¼ˆå…¨å†…å®¹ã‚’ä¿æŒï¼‰\n- è©±è€…ã®æ¨æ¸¬ã‚„ç‰¹å®š\n- ç™ºè¨€é †åºã®å¤‰æ›´",
          "maxIterations": 3
        },
        "continueOnFail": false,
        "retryOnFail": true,
        "maxTries": 3,
        "waitBetweenTries": 1000,
        "onError": "continueRegularOutput"
      },
      "_comment": "AI Agent Step2ã¯ã€Gemini 2.5 Flashã‚’ä½¿ç”¨ã—ã¦æ–‡å­—èµ·ã“ã—ãƒ†ã‚­ã‚¹ãƒˆã‚’æ•´å½¢ã—ã¾ã™ã€‚ãƒ•ã‚£ãƒ©ãƒ¼é™¤å»ã€é‡è¤‡è¡¨ç¾çµ±ä¸€ã€ç®‡æ¡æ›¸ãåŒ–ã‚’è¡Œã„ã€èª­ã¿ã‚„ã™ã„è­°äº‹éŒ²å½¢å¼ã«å¤‰æ›ã—ã¾ã™ã€‚5ãƒãƒ£ãƒ³ã‚¯ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚Šã€å¤§é‡ãƒ†ã‚­ã‚¹ãƒˆã‚’é«˜é€Ÿå‡¦ç†ã—ã¾ã™ã€‚ãƒªãƒˆãƒ©ã‚¤è¨­å®šï¼ˆmaxTries=3ã€waitBetweenTries=1000msï¼‰ã§APIéšœå®³ã«å¯¾å¿œã—ã€onError=continueRegularOutputã§ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚å‡¦ç†ã‚’ç¶™ç¶šã—ã¾ã™ã€‚",
      "notes": "typeVersion: 3 | promptType: define | text: ={{ $json.chunk }} | systemMessage: è­°äº‹éŒ²ä½œæˆå°‚é–€å®¶ | maxIterations: 3 | retryOnFail: true | maxTries: 3 | waitBetweenTries: 1000ms | onError: continueRegularOutput | ä¸¦åˆ—å‡¦ç†: 5ãƒãƒ£ãƒ³ã‚¯åŒæ™‚"
    },
    {
      "id": "gemini_step2_g3",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "name": "Gemini Flash 2.5 (Step2)",
      "typeVersion": 1,
      "position": [2200, 480],
      "parameters": {
        "model": "models/gemini-2.5-flash",
        "options": {
          "temperature": 0.4,
          "maxOutputTokens": 4000
        }
      },
      "credentials": {
        "googleGeminiOAuth2Api": {
          "id": "google_gemini_oauth2",
          "name": "Google Gemini OAuth2"
        }
      },
      "_comment": "Gemini 2.5 Flash Chat Modelã¯ã€AI Agent Step2ã®æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚temperature=0.4ã§å®‰å®šã—ãŸå‡ºåŠ›ã‚’ç¢ºä¿ã—ã€maxOutputTokens=4000ã§é•·æ–‡ãƒãƒ£ãƒ³ã‚¯ã«å¯¾å¿œã—ã¾ã™ã€‚é«˜é€Ÿå‡¦ç†ï¼ˆClaudeæ¯”3-5å€é€Ÿï¼‰ã¨ã‚³ã‚¹ãƒˆåŠ¹ç‡ï¼ˆClaudeæ¯”1/10ï¼‰ã«ã‚ˆã‚Šã€5ä¸¦åˆ—å‡¦ç†ã§ã‚‚ä½ã‚³ã‚¹ãƒˆã‚’ç¶­æŒã—ã¾ã™ã€‚",
      "notes": "typeVersion: 1 | model: models/gemini-2.5-flash | temperature: 0.4ï¼ˆå®‰å®šå‡ºåŠ›ï¼‰ | maxOutputTokens: 4000 | æ¥ç¶šã‚¿ã‚¤ãƒ—: ai_languageModel | Step020æº–æ‹ "
    },
    {
      "id": "memory_step2_g3",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "name": "Simple Memory (Step2)",
      "typeVersion": 1.3,
      "position": [2200, 560],
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "step2_memory",
        "contextWindowLength": 10
      },
      "_comment": "Simple Memory (Buffer Window)ã¯ã€AI Agent Step2ã®æ–‡è„ˆä¿æŒæ©Ÿèƒ½ã§ã™ã€‚sessionKey='step2_memory'ã§å°‚ç”¨ãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’ç¢ºä¿ã—ã€contextWindowLength=10ã§ç›´è¿‘10å›ã®å¯¾è©±å±¥æ­´ã‚’ä¿æŒã—ã¾ã™ã€‚ãƒãƒ£ãƒ³ã‚¯é–“ã®æ–‡è„ˆé€£ç¶šæ€§ã‚’ç¢ºä¿ã—ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—å‡¦ç†ã¨çµ„ã¿åˆã‚ã›ã¦é«˜ç²¾åº¦ãªæ•´å½¢ã‚’å®Ÿç¾ã—ã¾ã™ã€‚",
      "notes": "typeVersion: 1.3 | sessionIdType: customKey | sessionKey: step2_memory | contextWindowLength: 10 | æ¥ç¶šã‚¿ã‚¤ãƒ—: ai_memory | Step020è¦ä»¶æº–æ‹ ï¼ˆMemoryè¿½åŠ ï¼‰"
    },
    {
      "id": "sticky_g3",
      "type": "n8n-nodes-base.stickyNote",
      "name": "Group 3: æ–‡å­—èµ·ã“ã—æ•´å½¢ï¼ˆä¸¦åˆ—ï¼‰",
      "typeVersion": 1,
      "position": [2140, 140],
      "parameters": {
        "content": "## Group 3: æ–‡å­—èµ·ã“ã—æ•´å½¢ï¼ˆä¸¦åˆ—ï¼‰\n\n**ç›®çš„**: AI Agent Step2ã§ãƒãƒ£ãƒ³ã‚¯ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã¿ã‚„ã™ã„è­°äº‹éŒ²å½¢å¼ã«æ•´å½¢ï¼ˆ5ä¸¦åˆ—å‡¦ç†ï¼‰\n\n### ğŸ¯ ã“ã®ã‚°ãƒ«ãƒ¼ãƒ—ã®å½¹å‰²\n- **L5 (Core Logic)**: AI Agent Step2ã«ã‚ˆã‚‹æ–‡å­—èµ·ã“ã—æ•´å½¢\n- **ãƒ‘ã‚¿ãƒ¼ãƒ³2é©ç”¨**: AI Agent with Sub-Nodes and Tools\n- **ãƒ‘ã‚¿ãƒ¼ãƒ³3é©ç”¨**: Batch Processing (5ä¸¦åˆ—)\n\n### ğŸ“¦ ã“ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«å«ã¾ã‚Œã‚‹ãƒãƒ¼ãƒ‰\n\n**1. AI Agent Step2 - æ–‡å­—èµ·ã“ã—æ•´å½¢** (ai_agent_step2_g3)\n- ã‚¿ã‚¤ãƒ—: AI Agent\n- å½¹å‰²: ãƒ•ã‚£ãƒ©ãƒ¼é™¤å»ã€é‡è¤‡çµ±ä¸€ã€ç®‡æ¡æ›¸ãåŒ–\n- å…¥åŠ›: `={{ $json.chunk }}`ï¼ˆ25è¡Œãƒãƒ£ãƒ³ã‚¯ï¼‰\n- SystemMessage: è­°äº‹éŒ²ä½œæˆå°‚é–€å®¶\n- æ•´å½¢ãƒ«ãƒ¼ãƒ«: ãƒ•ã‚£ãƒ©ãƒ¼å‰Šé™¤ã€é‡è¤‡çµ±ä¸€ã€ç®‡æ¡æ›¸ãå¤‰æ›ã€è©±è€…ãƒ»ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä¿æŒ\n- ã‚¨ãƒ©ãƒ¼å‡¦ç†: maxTries=3ã€waitBetweenTries=1000msã€onError=continueRegularOutput\n\n**2. Gemini Flash 2.5 (Step2)** (gemini_step2_g3) - Sub-node\n- ã‚¿ã‚¤ãƒ—: Google Gemini Chat Model\n- å½¹å‰²: AI Agent Step2ã®æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³\n- è¨­å®š: model=models/gemini-2.5-flashã€temperature=0.4ã€maxOutputTokens=4000\n- æ¥ç¶š: ai_languageModel â†’ AI Agent Step2\n- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: Claudeæ¯”3-5å€é€Ÿã€ã‚³ã‚¹ãƒˆ1/10\n\n**3. Simple Memory (Step2)** (memory_step2_g3) - Sub-node\n- ã‚¿ã‚¤ãƒ—: Buffer Window Memory\n- å½¹å‰²: ãƒãƒ£ãƒ³ã‚¯é–“ã®æ–‡è„ˆä¿æŒï¼ˆç›´è¿‘10å›ã®å¯¾è©±å±¥æ­´ï¼‰\n- è¨­å®š: sessionIdType=customKeyã€sessionKey=step2_memoryã€contextWindowLength=10\n- æ¥ç¶š: ai_memory â†’ AI Agent Step2\n- ç›®çš„: ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã¨çµ„ã¿åˆã‚ã›ã¦æ–‡è„ˆé€£ç¶šæ€§ç¢ºä¿\n\n### ğŸ”— ãƒ•ãƒ­ãƒ¼\n**Group 2 (Split In Batches)** â†’ Output 1 (ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯) â†’ ai_agent_step2_g3 â†’ **Group 2 (Split In Batches)** â†’ ãƒ«ãƒ¼ãƒ—ç¶™ç¶š â†’ å…¨ãƒãƒ£ãƒ³ã‚¯å®Œäº†å¾Œ â†’ Output 0 â†’ **Group 4 (Merge)**\n\n### âš™ï¸ ä¾å­˜é–¢ä¿‚\n- **å…¥åŠ›**: Group 2ã‹ã‚‰ãƒãƒ£ãƒ³ã‚¯ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ$json.chunkã€25è¡Œ + ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—6è¡Œï¼‰\n- **å‡ºåŠ›**: æ•´å½¢æ¸ˆã¿ãƒãƒ£ãƒ³ã‚¯ â†’ Group 2ã¸ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯ â†’ å…¨å®Œäº†å¾ŒGroup 4ã¸\n- **Sub-nodes**: Gemini Flash 2.5 (Chat Model) + Simple Memory (Memory)\n- **ä¸¦åˆ—å‡¦ç†**: 5ãƒãƒ£ãƒ³ã‚¯åŒæ™‚å‡¦ç†\n\n### ğŸ“Š ä¸»è¦ãƒ‡ãƒ¼ã‚¿\n- **å…¥åŠ›**:\n  - `$json.chunk_id`: ãƒãƒ£ãƒ³ã‚¯ç•ªå·\n  - `$json.chunk`: ç”Ÿã®æ–‡å­—èµ·ã“ã—ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ25è¡Œï¼‰\n  - `$json.chunk_segments`: è©±è€…ãƒ»ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æƒ…å ±\n- **å‡ºåŠ›**:\n  - `$json.formatted_chunk`: æ•´å½¢æ¸ˆã¿ãƒ†ã‚­ã‚¹ãƒˆ\n  - `$json.speakers_identified`: ç‰¹å®šã•ã‚ŒãŸè©±è€…ãƒªã‚¹ãƒˆ\n  - `$json.line_count`: æ•´å½¢å¾Œã®è¡Œæ•°\n\n### ğŸ—ï¸ 12å±¤ãƒãƒƒãƒ”ãƒ³ã‚°\n- **L5 (Core Logic)**: ai_agent_step2_g3ï¼ˆAIåˆ¤æ–­ãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰\n\n### ğŸ”„ ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨\n\n**Pattern 1: Error-First Design**\n- maxTries: 3ï¼ˆæœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤ï¼‰\n- waitBetweenTries: 1000msï¼ˆãƒªãƒˆãƒ©ã‚¤é–“éš”ï¼‰\n- onError: continueRegularOutputï¼ˆã‚¨ãƒ©ãƒ¼æ™‚ã‚‚å‡¦ç†ç¶™ç¶šï¼‰\n- retryOnFail: true\n\n**Pattern 2: AI Agent with Sub-Nodes and Tools**\n- AI Agent: @n8n/n8n-nodes-langchain.agent (typeVersion 3)\n- Chat Model: Gemini 2.5 Flash (ai_languageModelæ¥ç¶š)\n- Memory: Buffer Window (ai_memoryæ¥ç¶šã€step2_memory)\n- Step020æº–æ‹ : Memoryè¿½åŠ ï¼ˆæ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆä¿®æ­£åæ˜ ï¼‰\n\n**Pattern 3: Batch Processing**\n- 5ãƒãƒ£ãƒ³ã‚¯ä¸¦åˆ—å‡¦ç†ï¼ˆGroup 2ã®Split In Batchesã¨é€£æºï¼‰\n- ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯: Split In Batches Output 1 â†’ AI Agent â†’ Split In Batches\n- å®Œäº†å¾Œ: Split In Batches Output 0 â†’ Group 4 (Merge)\n\n### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§\n- **ä¸¦åˆ—å‡¦ç†**: 5ãƒãƒ£ãƒ³ã‚¯åŒæ™‚â†’å‡¦ç†æ™‚é–“å¤§å¹…çŸ­ç¸®\n- **ãƒ¢ãƒ‡ãƒ«é€Ÿåº¦**: Gemini Flashï¼ˆClaudeæ¯”3-5å€é€Ÿï¼‰\n- **ã‚³ã‚¹ãƒˆ**: Claudeæ¯”1/10\n- **æ–‡è„ˆä¿æŒ**: Memoryï¼ˆcontextWindowLength=10ï¼‰",
        "height": 540,
        "width": 640,
        "color": 4
      }
    }
  ],
  "connections": {
    "Gemini Flash 2.5 (Step2)": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent Step2 - æ–‡å­—èµ·ã“ã—æ•´å½¢",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory (Step2)": {
      "ai_memory": [
        [
          {
            "node": "AI Agent Step2 - æ–‡å­—èµ·ã“ã—æ•´å½¢",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-11-13T00:00:00.000Z",
  "versionId": "v4.0"
}
