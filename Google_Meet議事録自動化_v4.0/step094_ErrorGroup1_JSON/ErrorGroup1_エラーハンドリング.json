{
  "name": "Google Meetè­°äº‹éŒ²è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ  - Error Group 1",
  "nodes": [
    {
      "id": "error_trigger_1",
      "type": "n8n-nodes-base.errorTrigger",
      "name": "Error Trigger",
      "parameters": {},
      "typeVersion": 1,
      "position": [200, 600],
      "_comment": "ã™ã¹ã¦ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰ã®ã‚¨ãƒ©ãƒ¼ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«è‡ªå‹•çš„ã«ã“ã®ãƒãƒ¼ãƒ‰ãŒèµ·å‹•ã—ã¾ã™ã€‚",
      "notes": "è‡ªå‹•èµ·å‹•: ã„ãšã‚Œã‹ã®ãƒãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã€‚ã‚¨ãƒ©ãƒ¼æƒ…å ±: error.message, error.stack, node.nameç­‰ã€‚"
    },
    {
      "id": "code_error_info",
      "type": "n8n-nodes-base.code",
      "name": "Code: ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´ç†",
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’æ•´ç†ã—ã€ç¨®åˆ¥ã‚’åˆ¤å®š\nconst error = $input.all()[0].json.error;\nconst nodeName = $input.all()[0].json.node?.name || 'Unknown';\nconst fileName = $input.all()[0].json.file_name || 'Unknown';\n\nlet errorType = 'unknown';\n\n// ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š\nif (nodeName.includes('Gemini') || nodeName.includes('éŸ³å£°æ–‡å­—èµ·ã“ã—')) {\n  errorType = 'gemini';\n} else if (nodeName.includes('AI Agent') || nodeName.includes('Claude')) {\n  errorType = 'ai';\n} else if (nodeName.includes('Google Drive')) {\n  errorType = 'drive';\n}\n\nreturn {\n  json: {\n    error_type: errorType,\n    error_message: error?.message || 'No error message',\n    error_stack: error?.stack || 'No stack trace',\n    node_name: nodeName,\n    file_name: fileName,\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "typeVersion": 2,
      "position": [400, 600],
      "_comment": "ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’æ•´ç†ã—ã€ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥ï¼ˆgeminiã€aiã€driveï¼‰ã‚’åˆ¤å®šã—ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒãƒ¼ãƒ‰åã€ãƒ•ã‚¡ã‚¤ãƒ«åã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚",
      "notes": "ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥: geminiï¼ˆéŸ³å£°æ–‡å­—èµ·ã“ã—å¤±æ•—ï¼‰ã€aiï¼ˆAIå‡¦ç†å¤±æ•—ï¼‰ã€driveï¼ˆGoogle Driveæ“ä½œå¤±æ•—ï¼‰ã€unknownï¼ˆãã®ä»–ï¼‰ã€‚å‡ºåŠ›: error_type, error_message, error_stack, node_name, file_name, timestampã€‚"
    },
    {
      "id": "if_error_type",
      "type": "n8n-nodes-base.if",
      "name": "IF: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š",
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.error_type }}",
              "rightValue": "gemini",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "typeVersion": 2,
      "position": [600, 600],
      "_comment": "ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥ã«å¿œã˜ã¦å‡¦ç†ã‚’åˆ†å²ã—ã¾ã™ã€‚Geminiå¤±æ•—ã®å ´åˆã¯Trueå‡ºåŠ›ã€ãã‚Œä»¥å¤–ã¯Falseå‡ºåŠ›ã€‚",
      "notes": "Trueå‡ºåŠ›ï¼ˆGeminiå¤±æ•—ï¼‰: M4Aãƒ•ã‚¡ã‚¤ãƒ«ã‚’/ã‚¨ãƒ©ãƒ¼/ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã€‚Falseå‡ºåŠ›ï¼ˆAI/Driveå¤±æ•—ï¼‰: éƒ¨åˆ†è­°äº‹éŒ²ä¿å­˜ã¾ãŸã¯n8nä¸€æ™‚ä¿å­˜ã€‚"
    },
    {
      "id": "google_drive_move_error",
      "type": "n8n-nodes-base.googleDrive",
      "name": "Google Drive: ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•",
      "parameters": {
        "operation": "update",
        "fileId": "={{ $('Google Drive: æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«æ¤œçŸ¥').item.json.id }}",
        "updateFields": {
          "parents": {
            "folderId": "/ã‚¨ãƒ©ãƒ¼/"
          }
        }
      },
      "typeVersion": 3,
      "position": [800, 500],
      "_comment": "GeminiéŸ³å£°æ–‡å­—èµ·ã“ã—å¤±æ•—æ™‚ã€M4Aãƒ•ã‚¡ã‚¤ãƒ«ã‚’/ã‚¨ãƒ©ãƒ¼/ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã—ã¾ã™ã€‚æ‰‹å‹•ã§å†å‡¦ç†å¯èƒ½ã§ã™ã€‚",
      "notes": "ç§»å‹•å…ˆ: /ã‚¨ãƒ©ãƒ¼/ã€‚ãƒˆãƒªã‚¬ãƒ¼: Geminiå¤±æ•—æ™‚ã®ã¿ï¼ˆIF Trueå‡ºåŠ›ï¼‰ã€‚"
    },
    {
      "id": "google_drive_create_error_minutes",
      "type": "n8n-nodes-base.googleDrive",
      "name": "Google Drive: ã‚¨ãƒ©ãƒ¼è­°äº‹éŒ²ä¿å­˜",
      "parameters": {
        "operation": "create",
        "name": "={{ '[ERROR]minutes - ' + $now.format('YYYY-MM-DD') + ' - ' + $json.file_name + '.md' }}",
        "parents": {
          "folderId": "/è­°äº‹éŒ²_å‡ºåŠ›/"
        },
        "mimeType": "text/markdown",
        "options": {
          "fileContent": "={{ '# ã‚¨ãƒ©ãƒ¼è­°äº‹éŒ²\\n\\n**ãƒ•ã‚¡ã‚¤ãƒ«**: ' + $json.file_name + '\\n**ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—**: ' + $json.error_type + '\\n**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ' + $json.error_message + '\\n**ç™ºç”Ÿãƒãƒ¼ãƒ‰**: ' + $json.node_name + '\\n**ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—**: ' + $json.timestamp + '\\n\\n## ã‚¨ãƒ©ãƒ¼è©³ç´°\\n\\n```\\n' + $json.error_stack + '\\n```' }}"
        }
      },
      "typeVersion": 3,
      "position": [800, 700],
      "_comment": "AIå¤±æ•—æ™‚ã€ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’å«ã‚€éƒ¨åˆ†è­°äº‹éŒ²ã‚’[ERROR]ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ãã§ä¿å­˜ã—ã¾ã™ã€‚æ‰‹å‹•ç¢ºèªç”¨ã€‚",
      "notes": "ä¿å­˜å…ˆ: /è­°äº‹éŒ²_å‡ºåŠ›/ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åå½¢å¼: [ERROR]minutes - YYYY-MM-DD - ãƒ•ã‚¡ã‚¤ãƒ«å.mdã€‚ãƒˆãƒªã‚¬ãƒ¼: AIå¤±æ•—æ™‚ï¼ˆIF Falseå‡ºåŠ›ï¼‰ã€‚"
    },
    {
      "id": "set_error_temp",
      "type": "n8n-nodes-base.set",
      "name": "Set: ã‚¨ãƒ©ãƒ¼ä¸€æ™‚ä¿å­˜",
      "parameters": {
        "mode": "manual",
        "duplicateItem": false,
        "assignments": {
          "assignments": [
            {
              "id": "error_1",
              "name": "error_logged",
              "value": "true",
              "type": "boolean"
            },
            {
              "id": "error_2",
              "name": "error_type",
              "value": "={{ $json.error_type }}",
              "type": "string"
            },
            {
              "id": "error_3",
              "name": "error_message",
              "value": "={{ $json.error_message }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "typeVersion": 3.4,
      "position": [1000, 600],
      "_comment": "ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’n8nå†…éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¸€æ™‚ä¿å­˜ã—ã¾ã™ã€‚Driveå¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚",
      "notes": "å‡ºåŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: error_logged, error_type, error_messageã€‚"
    },
    {
      "id": "http_request_discord_error",
      "type": "n8n-nodes-base.httpRequest",
      "name": "Discord: ã‚¨ãƒ©ãƒ¼é€šçŸ¥",
      "parameters": {
        "method": "POST",
        "url": "={{ $env.DISCORD_WEBHOOK_URL }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ 'ğŸš¨ è­°äº‹éŒ²ç”Ÿæˆã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ\\nğŸ“„ ãƒ•ã‚¡ã‚¤ãƒ«: ' + $json.file_name + '\\nâŒ ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—: ' + $json.error_type + '\\nğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ' + $json.error_message + '\\nğŸ”§ ç™ºç”Ÿãƒãƒ¼ãƒ‰: ' + $json.node_name + '\\nâ° æ™‚åˆ»: ' + $json.timestamp }}"
            }
          ]
        },
        "options": {}
      },
      "typeVersion": 4.2,
      "position": [1200, 600],
      "_comment": "ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼ã‚’Discord Webhookã§ç®¡ç†è€…ã«é€šçŸ¥ã—ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ãƒãƒ¼ãƒ‰åã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å«ã¿ã¾ã™ã€‚",
      "notes": "Webhook URL: ç’°å¢ƒå¤‰æ•° DISCORD_WEBHOOK_URLã€‚é€šçŸ¥å†…å®¹: file_name, error_type, error_message, node_name, timestampã€‚"
    },
    {
      "id": "sticky_error_1",
      "type": "n8n-nodes-base.stickyNote",
      "name": "Error Group 1: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°",
      "parameters": {
        "content": "## Error Group 1: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n\nğŸ“Œ **ãƒãƒ¼ãƒ‰**:\n- Error Trigger\n- Code: ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´ç†\n- IF: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š\n- Google Drive: ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•\n- Google Drive: ã‚¨ãƒ©ãƒ¼è­°äº‹éŒ²ä¿å­˜\n- Set: ã‚¨ãƒ©ãƒ¼ä¸€æ™‚ä¿å­˜\n- Discord: ã‚¨ãƒ©ãƒ¼é€šçŸ¥\n\n**è²¬å‹™**: å…¨ãƒãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ã€ç¨®åˆ¥åˆ¤å®šã€ãƒªã‚«ãƒãƒªãƒ¼ã€é€šçŸ¥\n\n**ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥**:\n1. **Geminiå¤±æ•—**: M4Aãƒ•ã‚¡ã‚¤ãƒ«ã‚’/ã‚¨ãƒ©ãƒ¼/ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•\n2. **AIå¤±æ•—**: [ERROR]è­°äº‹éŒ²ã‚’ä¿å­˜\n3. **Driveå¤±æ•—**: n8nå†…éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¸€æ™‚ä¿å­˜\n\n**å…¨ã‚¨ãƒ©ãƒ¼**: Discordé€šçŸ¥",
        "height": 300,
        "width": 360,
        "color": 7
      },
      "typeVersion": 1,
      "position": [150, 400]
    }
  ],
  "connections": {
    "Error Trigger": {
      "main": [
        [
          {
            "node": "Code: ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code: ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´ç†": {
      "main": [
        [
          {
            "node": "IF: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š": {
      "main": [
        [
          {
            "node": "Google Drive: ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Google Drive: ã‚¨ãƒ©ãƒ¼è­°äº‹éŒ²ä¿å­˜",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive: ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•": {
      "main": [
        [
          {
            "node": "Set: ã‚¨ãƒ©ãƒ¼ä¸€æ™‚ä¿å­˜",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive: ã‚¨ãƒ©ãƒ¼è­°äº‹éŒ²ä¿å­˜": {
      "main": [
        [
          {
            "node": "Set: ã‚¨ãƒ©ãƒ¼ä¸€æ™‚ä¿å­˜",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set: ã‚¨ãƒ©ãƒ¼ä¸€æ™‚ä¿å­˜": {
      "main": [
        [
          {
            "node": "Discord: ã‚¨ãƒ©ãƒ¼é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
