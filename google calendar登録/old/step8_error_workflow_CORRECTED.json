{
  "name": "Discord Calendar Manager - Error Handling",
  "meta": {
    "templateCreatedBy": "n8n AI Workflow Designer v9 - Error Workflow (Corrected)",
    "description": "Discord Calendar Managerç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å°‚ç”¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«Discordé€šçŸ¥ã‚’é€ä¿¡ã—ã€è©³ç´°ãƒ­ã‚°ã‚’è¨˜éŒ²",
    "version": "1.1.0",
    "linkedWorkflow": "Discord Calendar Manager - Google Calendar Integration (Corrected)",
    "corrections": "Write Fileãƒãƒ¼ãƒ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¿®æ­£ã€HTTP Requestãƒãƒ¼ãƒ‰ã®èªè¨¼è¨­å®šè¿½åŠ "
  },
  "nodes": [
    {
      "_comment": "Error Trigger: ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã«è‡ªå‹•å®Ÿè¡Œ",
      "parameters": {},
      "id": "error_trigger_001",
      "name": "Error Trigger",
      "type": "n8n-nodes-base.errorTrigger",
      "typeVersion": 1,
      "position": [240, 300],
      "notes": "å‡¦ç†å†…å®¹: ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ã‚¨ãƒ©ãƒ¼ã‚’æ¤œçŸ¥\nãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶: ä»»æ„ã®ãƒãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ\nå–å¾—æƒ…å ±:\n- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒãƒ¼ãƒ‰å\n- å®Ÿè¡ŒID\n- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—\n- ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹"
    },
    {
      "_comment": "ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´å½¢: ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«æ•´å½¢",
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’å–å¾—\nconst error = $input.first().json;\n\n// ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒãƒ¼ãƒ‰åã‚’å–å¾—\nconst errorNodeName = error.node?.name || 'Unknown Node';\n\n// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—\nconst errorMessage = error.error?.message || error.message || 'Unknown Error';\n\n// ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å–å¾—ï¼ˆæœ€åˆã®5è¡Œã®ã¿ï¼‰\nconst errorStack = error.error?.stack || error.stack || '';\nconst stackLines = errorStack.split('\\n').slice(0, 5).join('\\n');\n\n// å®Ÿè¡ŒIDã‚’å–å¾—\nconst executionId = $execution.id || 'Unknown';\n\n// ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æ—¥æœ¬æ™‚é–“ã§å–å¾—\nconst timestamp = new Date().toLocaleString('ja-JP', {\n  timeZone: 'Asia/Tokyo',\n  year: 'numeric',\n  month: '2-digit',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit',\n  second: '2-digit'\n});\n\n// ã‚¨ãƒ©ãƒ¼ã®é‡è¦åº¦ã‚’åˆ¤å®š\nlet severity = 'ERROR';\nif (errorMessage.includes('timeout') || errorMessage.includes('ETIMEDOUT')) {\n  severity = 'WARNING';\n} else if (errorMessage.includes('validation') || errorMessage.includes('Invalid')) {\n  severity = 'WARNING';\n} else if (errorMessage.includes('API') || errorMessage.includes('authentication')) {\n  severity = 'CRITICAL';\n}\n\n// å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\nconst inputData = error.itemData || {};\nconst userId = inputData.user_id || 'Unknown';\nconst messageContent = inputData.message_content || 'Unknown';\nconst callbackUrl = inputData.callback_url || null;\n\nreturn [{\n  json: {\n    // ã‚¨ãƒ©ãƒ¼åŸºæœ¬æƒ…å ±\n    error_node_name: errorNodeName,\n    error_message: errorMessage,\n    error_stack: stackLines,\n    severity: severity,\n    \n    // å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ\n    execution_id: executionId,\n    timestamp: timestamp,\n    workflow_name: 'Discord Calendar Manager',\n    \n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ\n    user_id: userId,\n    message_content: messageContent,\n    callback_url: callbackUrl,\n    \n    // Discordé€šçŸ¥ç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n    discord_message: `ğŸš¨ **ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ** [${severity}]\\n\\n` +\n      `**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: Discord Calendar Manager\\n` +\n      `**ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒãƒ¼ãƒ‰**: ${errorNodeName}\\n` +\n      `**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ${errorMessage}\\n` +\n      `**å®Ÿè¡ŒID**: ${executionId}\\n` +\n      `**ç™ºç”Ÿæ™‚åˆ»**: ${timestamp}\\n` +\n      `**ãƒ¦ãƒ¼ã‚¶ãƒ¼ID**: ${userId}\\n` +\n      `**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹**: ${messageContent.substring(0, 100)}${messageContent.length > 100 ? '...' : ''}\\n\\n` +\n      `**ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹**:\\n\\`\\`\\`\\n${stackLines}\\n\\`\\`\\`\\n\\n` +\n      `ç®¡ç†è€…ã«å ±å‘Šã—ã¦ãã ã•ã„ã€‚`,\n    \n    // ãƒ­ã‚°è¨˜éŒ²ç”¨è©³ç´°æƒ…å ±\n    log_entry: {\n      timestamp: timestamp,\n      severity: severity,\n      workflow: 'Discord Calendar Manager',\n      execution_id: executionId,\n      error_node: errorNodeName,\n      error_message: errorMessage,\n      error_stack: errorStack,\n      user_id: userId,\n      message_content: messageContent,\n      input_data: inputData\n    }\n  }\n}];"
      },
      "id": "code_002",
      "name": "ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´å½¢",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 300],
      "notes": "å‡¦ç†å†…å®¹: ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’æ•´å½¢ã—ã¦é€šçŸ¥ã¨ãƒ­ã‚°ã«ä½¿ç”¨\næŠ½å‡ºæƒ…å ±:\n- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒãƒ¼ãƒ‰å\n- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹\n- é‡è¦åº¦åˆ¤å®š (CRITICAL/ERROR/WARNING)\n- å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆå®Ÿè¡ŒIDã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆuser_id, message_contentï¼‰\nå‡ºåŠ›:\n- discord_message: Discordé€šçŸ¥ç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n- log_entry: ãƒ­ã‚°è¨˜éŒ²ç”¨è©³ç´°æƒ…å ±"
    },
    {
      "_comment": "é‡è¦åº¦ã§åˆ†å²: CRITICAL/ERRORã¯å³æ™‚é€šçŸ¥ã€WARNINGã¯ãƒ­ã‚°ã®ã¿",
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition_1",
              "leftValue": "={{ $json.severity }}",
              "rightValue": "WARNING",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ]
        }
      },
      "id": "if_003",
      "name": "é‡è¦åº¦åˆ¤å®š",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 300],
      "notes": "å‡¦ç†å†…å®¹: ã‚¨ãƒ©ãƒ¼é‡è¦åº¦ã§å‡¦ç†ã‚’åˆ†å²\nåˆ†å²1 (CRITICAL/ERROR): Discordç®¡ç†è€…é€šçŸ¥ + ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ + ãƒ­ã‚°è¨˜éŒ²\nåˆ†å²2 (WARNING): ãƒ­ã‚°è¨˜éŒ²ã®ã¿\nåˆ¤å®šåŸºæº–:\n- CRITICAL: èªè¨¼ã‚¨ãƒ©ãƒ¼ã€APIéšœå®³\n- ERROR: ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼\n- WARNING: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼"
    },
    {
      "_comment": "Discordç®¡ç†è€…é€šçŸ¥: CRITICAL/ERRORã®å ´åˆã«ç®¡ç†è€…ãƒãƒ£ãƒ³ãƒãƒ«ã«é€šçŸ¥",
      "parameters": {
        "method": "POST",
        "url": "={{ $json.callback_url || 'YOUR_ADMIN_DISCORD_WEBHOOK_URL' }}",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"content\": \"{{ $json.discord_message }}\"\n}",
        "options": {
          "timeout": 10000
        }
      },
      "id": "http_004",
      "name": "Discordç®¡ç†è€…é€šçŸ¥",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [800, 200],
      "continueOnFail": true,
      "retryOnFail": true,
      "maxTries": 2,
      "waitBetweenTries": 1000,
      "notes": "å‡¦ç†å†…å®¹: ç®¡ç†è€…ç”¨Discordãƒãƒ£ãƒ³ãƒãƒ«ã«ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’é€šçŸ¥\né€šçŸ¥å†…å®¹:\n- ã‚¨ãƒ©ãƒ¼é‡è¦åº¦ï¼ˆçµµæ–‡å­—ä»˜ãï¼‰\n- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒãƒ¼ãƒ‰å\n- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n- å®Ÿè¡ŒIDï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±\n- ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆæœ€åˆã®5è¡Œï¼‰\nè¨­å®š: YOUR_ADMIN_DISCORD_WEBHOOK_URLã‚’ç®¡ç†è€…ãƒãƒ£ãƒ³ãƒãƒ«ã®Webhook URLã«ç½®ãæ›ãˆã¦ãã ã•ã„"
    },
    {
      "_comment": "Discordãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥: callback_urlãŒã‚ã‚‹å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚ã‚¨ãƒ©ãƒ¼ã‚’é€šçŸ¥",
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition_1",
              "leftValue": "={{ $json.callback_url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty"
              }
            },
            {
              "id": "condition_2",
              "leftValue": "={{ $json.callback_url }}",
              "rightValue": "YOUR_ADMIN_DISCORD_WEBHOOK_URL",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "if_005",
      "name": "ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥è¦å¦åˆ¤å®š",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [920, 200],
      "notes": "å‡¦ç†å†…å®¹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ã‚¨ãƒ©ãƒ¼é€šçŸ¥ãŒå¿…è¦ã‹ã‚’åˆ¤å®š\nåˆ¤å®šæ¡ä»¶:\n1. callback_urlãŒå­˜åœ¨ã™ã‚‹\n2. callback_urlãŒç®¡ç†è€…ãƒãƒ£ãƒ³ãƒãƒ«ã¨ç•°ãªã‚‹\nåˆ†å²1 (true): ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚ã‚¨ãƒ©ãƒ¼é€šçŸ¥ã‚’é€ä¿¡\nåˆ†å²2 (false): ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ã‚¹ã‚­ãƒƒãƒ—"
    },
    {
      "_comment": "Discordãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã®ç°¡æ½”ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
      "parameters": {
        "method": "POST",
        "url": "={{ $json.callback_url }}",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"content\": \"âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ\\n\\näºˆå®šã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\\nã‚¨ãƒ©ãƒ¼å†…å®¹: {{ $json.error_message }}\\n\\nç®¡ç†è€…ã«å ±å‘Šæ¸ˆã¿ã§ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚\\n\\nå®Ÿè¡ŒID: {{ $json.execution_id }}\"\n}",
        "options": {
          "timeout": 10000
        }
      },
      "id": "http_006",
      "name": "Discordãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1040, 100],
      "continueOnFail": true,
      "retryOnFail": false,
      "notes": "å‡¦ç†å†…å®¹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç°¡æ½”ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šçŸ¥\né€šçŸ¥å†…å®¹:\n- ã‚¨ãƒ©ãƒ¼çµµæ–‡å­—\n- ç°¡å˜ãªã‚¨ãƒ©ãƒ¼èª¬æ˜\n- å®Ÿè¡ŒIDï¼ˆå•ã„åˆã‚ã›æ™‚ã®å‚ç…§ç”¨ï¼‰\n- å¯¾å‡¦æ–¹æ³•ã®æ¡ˆå†…\nç‰¹å¾´: æŠ€è¡“çš„ãªè©³ç´°ã¯å«ã‚ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªè¡¨ç¾"
    },
    {
      "_comment": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²: å…¨ã‚¨ãƒ©ãƒ¼ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²",
      "parameters": {
        "operation": "append",
        "fileName": "/tmp/n8n_discord_calendar_errors.jsonl",
        "fileContent": "={{ JSON.stringify($json.log_entry) + '\\n' }}",
        "options": {
          "encoding": "utf8"
        }
      },
      "id": "file_007",
      "name": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²",
      "type": "n8n-nodes-base.writeFile",
      "typeVersion": 1,
      "position": [1040, 300],
      "continueOnFail": true,
      "notes": "å‡¦ç†å†…å®¹: ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’JSONLå½¢å¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜\nãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹: /tmp/n8n_discord_calendar_errors.jsonl\nãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: 1è¡Œ1ã‚¨ãƒ©ãƒ¼ï¼ˆJSON Lineså½¢å¼ï¼‰\nè¨˜éŒ²å†…å®¹:\n- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—\n- ã‚¨ãƒ©ãƒ¼é‡è¦åº¦\n- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å\n- å®Ÿè¡ŒID\n- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒãƒ¼ãƒ‰\n- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ\nç”¨é€”: å¾Œã§ãƒ­ã‚°åˆ†æã€çµ±è¨ˆã€ãƒ‡ãƒãƒƒã‚°ã«ä½¿ç”¨"
    },
    {
      "_comment": "Slacké€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: Slackã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã®é€šçŸ¥",
      "parameters": {
        "method": "POST",
        "url": "YOUR_SLACK_WEBHOOK_URL",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"text\": \"ğŸš¨ n8n Discord Calendar Manager - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ\",\n  \"blocks\": [\n    {\n      \"type\": \"header\",\n      \"text\": {\n        \"type\": \"plain_text\",\n        \"text\": \"ğŸš¨ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ [{{ $json.severity }}]\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"fields\": [\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"*ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:*\\nDiscord Calendar Manager\"\n        },\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"*å®Ÿè¡ŒID:*\\n{{ $json.execution_id }}\"\n        },\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"*ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ãƒ‰:*\\n{{ $json.error_node_name }}\"\n        },\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"*ç™ºç”Ÿæ™‚åˆ»:*\\n{{ $json.timestamp }}\"\n        }\n      ]\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:*\\n```{{ $json.error_message }}```\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±:*\\nUser ID: {{ $json.user_id }}\\nMessage: {{ $json.message_content }}\"\n      }\n    },\n    {\n      \"type\": \"divider\"\n    },\n    {\n      \"type\": \"context\",\n      \"elements\": [\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"è©³ç´°ã¯ n8n å®Ÿè¡Œãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„\"\n        }\n      ]\n    }\n  ]\n}",
        "options": {
          "timeout": 10000
        }
      },
      "id": "http_008",
      "name": "Slacké€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [800, 400],
      "continueOnFail": true,
      "retryOnFail": false,
      "notes": "å‡¦ç†å†…å®¹: Slackã«ã‚¨ãƒ©ãƒ¼é€šçŸ¥ã‚’é€ä¿¡ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\nè¨­å®šæ–¹æ³•:\n1. Slack Incoming Webhook URLã‚’å–å¾—\n2. YOUR_SLACK_WEBHOOK_URLã‚’å®Ÿéš›ã®URLã«ç½®ãæ›ãˆ\n3. ã“ã®ãƒãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–\né€šçŸ¥å†…å®¹:\n- ãƒªãƒƒãƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆSlack Blocksä½¿ç”¨ï¼‰\n- ã‚¨ãƒ©ãƒ¼è©³ç´°\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±\n- å®Ÿè¡ŒIDã¸ã®ãƒªãƒ³ã‚¯\næ³¨æ„: ä½¿ç”¨ã—ãªã„å ´åˆã¯ã“ã®ãƒãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„"
    },
    {
      "_comment": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°é›†è¨ˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: WARNINGã‚¨ãƒ©ãƒ¼ã®çµ±è¨ˆæƒ…å ±",
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// WARNINGã‚¨ãƒ©ãƒ¼ã®å ´åˆã®ã¿çµ±è¨ˆã‚’æ›´æ–°\nconst staticData = this.getWorkflowStaticData('global');\n\nif (!staticData.errorStats) {\n  staticData.errorStats = {\n    total_warnings: 0,\n    total_errors: 0,\n    total_critical: 0,\n    last_warning: null,\n    last_error: null,\n    last_critical: null,\n    error_by_node: {}\n  };\n}\n\nconst severity = $input.first().json.severity;\nconst errorNode = $input.first().json.error_node_name;\nconst timestamp = $input.first().json.timestamp;\n\n// é‡è¦åº¦åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ\nif (severity === 'WARNING') {\n  staticData.errorStats.total_warnings++;\n  staticData.errorStats.last_warning = timestamp;\n} else if (severity === 'ERROR') {\n  staticData.errorStats.total_errors++;\n  staticData.errorStats.last_error = timestamp;\n} else if (severity === 'CRITICAL') {\n  staticData.errorStats.total_critical++;\n  staticData.errorStats.last_critical = timestamp;\n}\n\n// ãƒãƒ¼ãƒ‰åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ\nif (!staticData.errorStats.error_by_node[errorNode]) {\n  staticData.errorStats.error_by_node[errorNode] = 0;\n}\nstaticData.errorStats.error_by_node[errorNode]++;\n\nreturn [{\n  json: {\n    ...($input.first().json),\n    statistics: staticData.errorStats\n  }\n}];"
      },
      "id": "code_009",
      "name": "ã‚¨ãƒ©ãƒ¼çµ±è¨ˆæ›´æ–°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 500],
      "notes": "å‡¦ç†å†…å®¹: ã‚¨ãƒ©ãƒ¼çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆä½¿ç”¨ï¼‰\nçµ±è¨ˆé …ç›®:\n- é‡è¦åº¦åˆ¥ã‚«ã‚¦ãƒ³ãƒˆï¼ˆWARNING/ERROR/CRITICALï¼‰\n- æœ€çµ‚ç™ºç”Ÿæ™‚åˆ»ï¼ˆé‡è¦åº¦åˆ¥ï¼‰\n- ãƒãƒ¼ãƒ‰åˆ¥ã‚¨ãƒ©ãƒ¼ã‚«ã‚¦ãƒ³ãƒˆ\nç”¨é€”:\n- ã‚¨ãƒ©ãƒ¼å‚¾å‘åˆ†æ\n- å•é¡Œã®å¤šã„ãƒãƒ¼ãƒ‰ã®ç‰¹å®š\n- å®šæœŸãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã®åŸºç¤ãƒ‡ãƒ¼ã‚¿\næ³¨æ„: ä½¿ç”¨ã—ãªã„å ´åˆã¯ã“ã®ãƒãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„"
    },
    {
      "_comment": "ã‚¨ãƒ©ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ‚äº†",
      "parameters": {},
      "id": "noop_010",
      "name": "Error Workflowå®Œäº†",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [1260, 300],
      "notes": "å‡¦ç†å†…å®¹: ã‚¨ãƒ©ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ­£å¸¸çµ‚äº†\nåˆ°é”ãƒ‘ã‚¿ãƒ¼ãƒ³:\n1. ç®¡ç†è€…é€šçŸ¥ â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ â†’ ãƒ­ã‚°è¨˜éŒ² â†’ çµ‚äº†\n2. ç®¡ç†è€…é€šçŸ¥ â†’ ãƒ­ã‚°è¨˜éŒ² â†’ çµ‚äº†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ã‚¹ã‚­ãƒƒãƒ—ï¼‰\n3. ãƒ­ã‚°è¨˜éŒ²ã®ã¿ â†’ çµ‚äº†ï¼ˆWARNINGï¼‰\nå…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯å¿…ãšè¨˜éŒ²ã•ã‚Œã‚‹"
    }
  ],
  "connections": {
    "Error Trigger": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´å½¢",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ã‚¨ãƒ©ãƒ¼æƒ…å ±æ•´å½¢": {
      "main": [
        [
          {
            "node": "é‡è¦åº¦åˆ¤å®š",
            "type": "main",
            "index": 0
          },
          {
            "node": "ã‚¨ãƒ©ãƒ¼çµ±è¨ˆæ›´æ–°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "é‡è¦åº¦åˆ¤å®š": {
      "main": [
        [
          {
            "node": "Discordç®¡ç†è€…é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Discordç®¡ç†è€…é€šçŸ¥": {
      "main": [
        [
          {
            "node": "ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥è¦å¦åˆ¤å®š",
            "type": "main",
            "index": 0
          },
          {
            "node": "Slacké€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥è¦å¦åˆ¤å®š": {
      "main": [
        [
          {
            "node": "Discordãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Discordãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²": {
      "main": [
        [
          {
            "node": "Error Workflowå®Œäº†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slacké€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ã‚¨ãƒ©ãƒ¼çµ±è¨ˆæ›´æ–°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰": {
      "main": [
        [
          {
            "node": "Error Workflowå®Œäº†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "saveExecutionProgress": true,
    "timezone": "Asia/Tokyo",
    "callerPolicy": "workflowsFromSameOwner",
    "executionTimeout": 60
  },
  "staticData": null,
  "tags": [
    {
      "id": "error_handling",
      "name": "Error Handling"
    }
  ],
  "pinData": {},
  "versionId": "1.1"
}
